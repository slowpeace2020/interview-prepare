<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 903.56298828125 1661.6286926269531" width="1807.1259765625" height="3323.2573852539062">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://excalidraw.com/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="903.56298828125" height="1661.6286926269531" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(22.40484619140625 48.12934875488281) rotate(0 341.3949890136719 166.06398010253906)"><path d="M32 0 C236.75 0.93, 439.58 1.54, 650.79 0 M32 0 C182.82 1.21, 333.73 1.63, 650.79 0 M650.79 0 C672.57 0.27, 682.92 10.35, 682.79 32 M650.79 0 C670.85 1.7, 683.98 9.9, 682.79 32 M682.79 32 C683.81 89.24, 681.69 149.88, 682.79 300.13 M682.79 32 C681.86 92.25, 682.21 153.75, 682.79 300.13 M682.79 300.13 C681.54 322.06, 673.99 330.51, 650.79 332.13 M682.79 300.13 C682.21 323.58, 671.68 333.49, 650.79 332.13 M650.79 332.13 C455.64 334.95, 259.9 334.34, 32 332.13 M650.79 332.13 C431 330.12, 211.28 330.16, 32 332.13 M32 332.13 C10.12 332.25, -1.3 319.52, 0 300.13 M32 332.13 C11.39 332.5, 2.01 320.03, 0 300.13 M0 300.13 C-0.54 228.71, -1.56 157.51, 0 32 M0 300.13 C0.88 207.06, 1.45 113.68, 0 32 M0 32 C-1.59 10.56, 9.24 -1.61, 32 0 M0 32 C-0.08 10.18, 11.12 -2.23, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(58.761962890625 52.77381896972656) rotate(0 247.1597900390625 162.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. requirements and clarification</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">functional requirements</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. surpport both web and mobile app</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. a user can publish a post</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3. see friends' posts on feed page</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">4. feed is sorted by reverse chronological order</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">5. feed contain media files, like images and videos</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">non-functional requirements </text><text x="0" y="250" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">availability</text><text x="0" y="275" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">scalability</text><text x="0" y="300" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g stroke-linecap="round" transform="translate(22.951889038085938 397.71917724609375) rotate(0 329.45264434814453 136.17710876464844)"><path d="M32 0 C198.01 -0.41, 365.16 -1.74, 626.91 0 M32 0 C198.64 -0.33, 365.67 0.33, 626.91 0 M626.91 0 C647.23 0.22, 659.21 8.86, 658.91 32 M626.91 0 C647.66 -1, 660.35 10.36, 658.91 32 M658.91 32 C656.65 76.59, 658.26 121.69, 658.91 240.35 M658.91 32 C659.44 92.76, 659 152.5, 658.91 240.35 M658.91 240.35 C658.1 259.78, 649.26 274.01, 626.91 272.35 M658.91 240.35 C657.13 262.04, 647.6 270.98, 626.91 272.35 M626.91 272.35 C481.83 273.45, 337.15 274.19, 32 272.35 M626.91 272.35 C447.87 270.97, 268.07 270.69, 32 272.35 M32 272.35 C12.17 272.01, -0.52 259.95, 0 240.35 M32 272.35 C10.22 271.23, -2.22 262.61, 0 240.35 M0 240.35 C0.24 192.25, 0.15 141.45, 0 32 M0 240.35 C-2.58 156.99, -2.17 74.92, 0 32 M0 32 C-1.06 9.32, 10.21 1.48, 32 0 M0 32 C-2.29 11.98, 12.6 -1.49, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(41.6688232421875 410.2577819824219) rotate(0 293.16973876953125 125)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. Traffic Estimation</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">500 friends/user</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">10 million DAU</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">参考twitter:</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">feeds post size based on text(280 characters, 280Byte)</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">/image(10M)/video(60秒/100M)</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">10M * 1 post/day  50% text, 40% image, 10% video</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">=5M *0.0003M+4M * 4M *10M+1M*100M=540M * M </text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">= 0.54GB * M = 540GB * 1000 = 540 TB/day</text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Post: 0.3KB * 10M/day = 3GB/day</text></g><g transform="translate(300.99053955078125 10) rotate(0 146.46592712402344 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">NewsFeed Design</text></g><g stroke-linecap="round" transform="translate(17.377685546875 686.3695373535156) rotate(0 291.75927734375 66.90707397460938)"><path d="M32 0 C148.14 0.77, 264.02 0.65, 551.52 0 M32 0 C204.92 -1.48, 377.32 -1.83, 551.52 0 M551.52 0 C571.7 0.97, 585.29 9.95, 583.52 32 M551.52 0 C574.72 0.42, 583.95 12.86, 583.52 32 M583.52 32 C582.5 53.5, 582.57 72.88, 583.52 101.81 M583.52 32 C583.25 54.67, 582.93 77.59, 583.52 101.81 M583.52 101.81 C583.93 121.55, 571.79 135.73, 551.52 133.81 M583.52 101.81 C585.01 125.17, 571.52 132.73, 551.52 133.81 M551.52 133.81 C447.93 131.71, 342.86 132.12, 32 133.81 M551.52 133.81 C425.26 133.6, 298.6 134.2, 32 133.81 M32 133.81 C11.71 135.48, 0.67 123.93, 0 101.81 M32 133.81 C10.65 133.56, 1.02 123.22, 0 101.81 M0 101.81 C-1.6 83.14, -1.53 61.93, 0 32 M0 101.81 C-0.46 81.47, -0.02 59.44, 0 32 M0 32 C-0.14 8.86, 9.23 1.15, 32 0 M0 32 C-2.11 9.67, 10.89 -1.47, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(34.2969970703125 691.0652160644531) rotate(0 262.22979736328125 75)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3. API design</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">feed publish </text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">post /v1/me/feed?content=value1&amp;auth_token=value2</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">retrival</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">GET /v1/me/feed?auth_token=value1</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g stroke-linecap="round" transform="translate(20.857269287109375 841.6535034179688) rotate(0 309.2118988037109 122.58799743652344)"><path d="M32 0 C218.09 0.54, 404.42 1.48, 586.42 0 M32 0 C155.33 -0.35, 279.14 -0.48, 586.42 0 M586.42 0 C609.54 -1.13, 617.27 10.48, 618.42 32 M586.42 0 C607.42 2.09, 617.89 9.86, 618.42 32 M618.42 32 C618.29 78.96, 616.97 129.61, 618.42 213.18 M618.42 32 C618.35 75.45, 617.81 119.13, 618.42 213.18 M618.42 213.18 C617 234.76, 606.86 243.92, 586.42 245.18 M618.42 213.18 C617.35 234.26, 607.48 245.67, 586.42 245.18 M586.42 245.18 C426 246.33, 265.67 245.78, 32 245.18 M586.42 245.18 C440.6 243.78, 294.63 244.35, 32 245.18 M32 245.18 C11.35 243.29, -0.58 232.72, 0 213.18 M32 245.18 C8.86 245.23, -1.97 234.76, 0 213.18 M0 213.18 C-2.32 156.24, -2.55 98.14, 0 32 M0 213.18 C-0.44 166.15, -1.07 116.83, 0 32 M0 32 C-1.34 10.77, 12.24 0.93, 32 0 M0 32 C-0.93 8.39, 11.23 0.49, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(32.4415283203125 851.509765625) rotate(0 169.18988037109375 137.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">4. Database Design</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">UserInfo table</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">user_id name email phone avatar </text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">post table</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">post_id content imgs videos</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">relation table</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">user1_id user2_id</text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="250" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g stroke-linecap="round" transform="translate(10 1120.1468811035156) rotate(0 441.781494140625 265.74090576171875)"><path d="M32 0 C285.8 -1.71, 540.04 -1.17, 851.56 0 M32 0 C342.64 3.16, 653.15 3.17, 851.56 0 M851.56 0 C872.76 -1.31, 882.29 8.67, 883.56 32 M851.56 0 C872.6 1.28, 882.8 12.2, 883.56 32 M883.56 32 C883.84 217.59, 883.7 402.83, 883.56 499.48 M883.56 32 C882.99 169.9, 883.4 309.07, 883.56 499.48 M883.56 499.48 C881.58 520.36, 871.7 530.03, 851.56 531.48 M883.56 499.48 C885.76 522.19, 873.93 531.29, 851.56 531.48 M851.56 531.48 C606.61 534.43, 361.01 534.85, 32 531.48 M851.56 531.48 C635.3 530.1, 418.84 529.74, 32 531.48 M32 531.48 C11 532.24, -2 521.58, 0 499.48 M32 531.48 C9.92 530.45, -0.02 521.12, 0 499.48 M0 499.48 C-0.2 340.56, -0.1 182.22, 0 32 M0 499.48 C-0.67 377.84, -0.04 256.65, 0 32 M0 32 C-1.24 9.23, 12.49 1.99, 32 0 M0 32 C0.89 12.58, 8.53 -0.78, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(40.39703369140625 1141.8837280273438) rotate(0 92.6799087524414 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">5. High-level Design</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g></svg>